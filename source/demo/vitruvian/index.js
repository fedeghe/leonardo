window.onload = function () {

    function render() {
        var target = document.getElementById('trg'),
            prop = 422/436,
            // width = Math.min(987, window.innerWidth-50),
            width = window.innerWidth-50,
            height = parseInt(width / prop, 10),
            w = function (p) {return width * p/100;},
            h = function (p) {return height * p/100;},
            Leo = Leonardo(width, height, { ns: '*', target: target }).setStyles({backgroundColor: '#22222200'}),
            img = Leo.image(0,0,width, height, './vitruvian.jpg').setAttributes({opacity: 0.4}),
            fillStyle = {
                "stroke-width": 2,
                "stroke": '#777777',
                "stroke-opacity": 1,
                "fill-opacity": 10,
                "stroke-linejoin": "round",
                fill: 'transparent'
            },

            crunch = Leo.positionCruncher(width, height, fillStyle),
            crunchClose = Leo.positionCruncher(width, height, fillStyle, true),

            outer = crunch([
                [43.94, 31.97],
[-0.91, 0.88],
[-1.37, -0.33],
[-1.31, 0.33],
[-1.31, -0.06],
[-1.26, 0.33],
[-0.91, 0.44],
[-1.43, 0.11],
[-2.23, 0.17],
[-1.89, 0.17],
[-0.97, 0],
[-0.91, -0.39],
[-1.26, -0.06],
[-1.54, 0],
[-1.54, -0.17],
[-1.66, -0.06],
[-1.6, 0.28],
[-1.54, 0],
[-1.49, 0],
[-1.31, -0.55],
[-0.69, -0.44],
[-1.03, -0.06],
[-0.86, -0.55],
[-1.37, 0],
[-0.8, 0],
[-0.34, 0.17],
[0.4, 0.33],
[0.97, 0.11],
[1.03, 0.33],
[-1.14, 0.11],
[-1.09, -0.06],
[-1.49, 0.17],
[-0.29, 0.39],
[1.2, 0.28],
[1.03, 0.17],
[1.14, 0.17],
[-0.69, 0.28],
[-0.86, -0.06],
[-1.2, 0.11],
[-0.11, 0.44],
[0.91, 0.11],
[1.31, 0],
[1.43, 0],
[-0.97, 0.22],
[-1.37, 0.22],
[-0.23, 0.39],
[0.69, 0],
[1.49, 0.11],
[1.49, 0.11],
[1.31, 0.17],
[1.09, 0.33],
[0.97, 0],
[0.74, -0.33],
[2.06, 0.39],
[1.94, 0.22],
[2.29, 0.33],
[2.46, 0.17],
[1.77, 0.11],
[0.91, -0.33],
[1.6, 0],
[1.94, 0.06],
[0.97, 0.06],
[1.03, 0.28],
[1.26, 0.17],
[1.66, -0.06],
[1.43, 0.11],
[0.63, 0.61],
[0.57, 1.33],
[0.69, 1.05],
[0.23, 1.83],
[0.34, 1.71],
[0.57, 1.55],
[0.63, 0.88],
[-0.51, 1.88],
[-0.4, 1.6],
[0.29, 0.83],
[-0.8, 1],
[-0.29, 1.49],
[-0.34, 1.66],
[-0.63, 1.44],
[-0.91, 1.22],
[-0.97, 1.6],
[-0.57, 1.77],
[-0.63, 1.6],
[-0.51, 1.49],
[-0.4, 1.55],
[-0.11, 1.38],
[-0.57, 1.11],
[-1.26, 1.05],
[-1.09, 1.55],
[-1.83, 2.1],
[-1.54, 1.83],
[-0.8, 1.99],
[-0.69, 2.1],
[-0.74, 2.32],
[-0.4, 1.77],
[-0.57, 2.27],
[-0.74, 1.88],
[-0.69, 0.5],
[-0.86, 0],
[-0.69, 0.66],
[0.46, 0.66],
[0.74, -0.55],
[-0.34, 1],
[1.03, -0.72],
[-0.4, 0.77],
[1.03, -0.66],
[-0.63, 1.05],
[1.14, -0.66],
[-0.46, 0.94],
[0.63, 0.39],
[0.69, 0],
[0.63, -0.33],
[0, -1],
[0.4, -1],
[0.4, -0.83],
[0.23, -1.66],
[0.57, -1.33],
[0.86, -1.11],
[1.31, -2.05],
[1.14, -1.38],
[1.09, -1.94],
[0.46, -1.44],
[0.69, -1.55],
[0.8, -1.22],
[1.66, -1.71],
[1.66, -1.88],
[1.2, -1.66],
[0.86, -2.1],
[1.77, -1.71],
[1.71, -1.83],
[1.6, -2.27],
[3.2, 0.77],
[1.09, 2.54],
[1.43, 2.43],
[1.26, 1.44],
[1.03, 1.33],
[0.8, 1.6],
[0.63, 1.83],
[0.74, 1.22],
[0.4, 1.16],
[0.46, 1.27],
[0.46, 1.55],
[0.51, 1.6],
[0.86, 1.33],
[1.14, 1.33],
[0.51, 0.66],
[0.51, 1.6],
[1.03, 1.16],
[1.03, 0.94],
[1.09, 1.27],
[0.91, 1.77],
[0.23, 1.22],
[0.17, 1.11],
[0.91, 0.28],
[1.31, -0.5],
[0.74, -1],
[1.09, -0.11],
[1.03, -0.5],
[0.51, -0.5],
[0.74, -0.28],
[0.29, -0.66],
[0.4, 0.06],
[0.46, -0.22],
[-0.11, -0.61],
[-0.63, 0],
[-1.31, 0.06],
[-1.54, 0.11],
[-1.03, -0.22],
[-1.54, -1.66],
[-1.03, -1.99],
[-0.91, -2.54],
[-0.74, -2.43],
[-1.26, -2.16],
[-1.09, -1.66],
[-0.51, -0.39],
[-0.51, -1.66],
[-0.34, -1.49],
[-0.51, -1.38],
[-0.91, -1.71],
[0.06, -1.33],
[-0.11, -1.44],
[-0.69, -2.1],
[-0.63, -2.32],
[-0.91, -1.38],
[-1.09, -1.94],
[-0.51, -1.22],
[-0.11, -2.05],
[-0.74, -1.94],
[-0.63, -1.49],
[0.4, -1.16],
[-0.17, -1.38],
[0, -0.88],
[-0.34, -1.11],
[0.57, -1.38],
[0.17, -1.55],
[0.8, -1.11],
[0.29, -1.66],
[0.23, -1.55],
[0.8, -1.22],
[1.6, -0.83],
[1.43, 0],
[1.2, 0.17],
[1.26, -0.5],
[1.2, 0.11],
[1.66, 0.17],
[1.43, -0.33],
[1.6, 0.55],
[2.06, 0.06],
[1.94, 0.11],
[1.77, -0.55],
[1.6, -0.33],
[2.17, 0],
[1.43, -0.11],
[1.14, 0.06],
[1.54, -0.28],
[1.54, -0.06],
[0.97, -0.17],
[0.8, 0],
[0.46, -0.33],
[-1.31, -0.11],
[-1.37, -0.39],
[1.09, -0.22],
[1.09, -0.06],
[0.69, -0.06],
[0.34, -0.22],
[-0.34, -0.33],
[-1.09, 0],
[-1.03, 0],
[-0.63, 0],
[1.43, -0.28],
[1.14, 0],
[0.8, -0.06],
[0.34, -0.39],
[-0.63, -0.28],
[-1.26, 0.22],
[-1.2, 0],
[-0.46, 0],
[0.69, -0.33],
[0.91, -0.11],
[0.8, 0],
[-0.06, -0.5],
[-1.14, -0.39],
[-0.69, 0],
[-1.09, 0.17],
[-0.91, -0.22],
[-1.03, 0.44],
[-1.03, 0.66],
[-0.86, 0.28],
[-1.6, 0.11],
[-2, 0.06],
[-1.94, -0.44],
[-2.57, 0.17],
[-1.77, 0.28],
[-1.2, 0.44],
[-1.37, -0.72],
[-2.23, 0.11],
[-1.66, 0.06],
[-1.49, -0.61],
[-1.43, -0.39],
[-1.43, -0.33],
[-1.2, 0.17],
[-1.37, 0.06],
[-1.54, 0.17],
[-0.86, -0.83],
[-1.26, -0.72],
[-1.03, -0.72],
            ]),
            inner = crunch([

            ]),
            czz = crunch([
                [46.74, 57.3],
[0.63, 0.61],
[0.91, -0.06],
[-0.63, -1.05],
[-0.06, 0.55],
[1.43, 0.66],
[-0.4, -1.66],
[-0.29, 0.44],
[1.14, 1.05],
[0.69, -0.33],
[-0.23, -1.22],
[-0.63, 0.39],
[0.8, 1.33],
[0.8, -0.44],
[-0.11, -1.49],
[-0.29, 0.72],
[0.74, 1.05],
[-0.86, 0.61],
[0.23, 1],
[0, 1.11],
[-0.34, 0.88],
[-0.91, -0.11],
[-0.51, -0.33],
[-0.69, 0.5],
[-0.63, -0.5],
[-0.11, -0.88],
[0.69, -0.72],
[0.17, -1.05],
[0.74, -0.61],
[-0.29, 1],
[0.11, 0.66],
[-0.29, 0.61],
[0, 0.44],
[0.97, 1.16],
[0.17, -0.66],
[0.57, -0.55],
[-0.29, -0.66],
[-0.06, -1.33],
            ]),
            tits = crunch([
                [41.45, 33.11],
[1.76, 1.48],
[1.52, 0.49],
[2.11, -0.49],
[2.11, -0.49],
[1.64, 0.33],
[1.76, 0.41],
[1.29, 0],
[1.64, -0.49],
[1.05, -1.24]
            ]),
            face = crunchClose([
                [46.63, 25.22],
[0.91, -0.11],
[0.91, -0.06],
[-0.51, 0.72],
[-0.86, 0.28],
[-0.51, -0.44],
[0.63, -0.06],
[0.69, -0.11],
[0.74, -0.17],
[-0.11, 1.05],
[0, 0.55],
[-0.4, 0.39],
[0.4, 0.06],
[0.34, 0.17],
[0.34, -0.17],
[0.69, 0],
[-0.11, -0.5],
[-0.57, -0.39],
[0, -1.55],
[2.06, 0.17],
[-0.23, 0.66],
[-0.34, 0.33],
[-0.63, -0.28],
[-0.23, -0.5],
[-0.23, -0.5],
[0.97, 0.17],
[-1.26, 0],
[0, 1.49],
[0.11, 0.83],
[-0.63, 0.55],
[0, 0.39],
[-1.14, 0.33],
[1.03, 0.17],
[1.37, 0],
[-0.86, -0.44],
[-0.34, -0.72],
[-0.63, -0.22],
[0.34, -2.38],
[-1.94, 0.22],
[-0.46, -0.06],
[-0.29, 1.6],
[0.29, 1.94],
[0.63, 1],
[0.8, 0.28],
[0.74, 0.11],
[0.69, 0],
[0.51, 0.06],
[0.57, -0.22],
[0.74, -0.44],
[0.74, -0.88],
[0.57, -1.94],
[-0.06, -1.22],
[-0.4, -1.16],
[-0.63, -1.33],
[-1.66, -0.44],
[-1.31, 0.06],
[-1.43, 0.72],
            ]),
            hairs = crunchClose([
                [46.34, 29.76],
[-0.34, 0.77],
[-0.86, 1],
[-0.86, 0.88],
[-0.23, -1.44],
[-0.34, 0.11],
[0.34, -1.71],
[-1.14, 0.22],
[-0.06, 0.55],
[-0.17, -1.22],
[1.14, 0],
[-0.69, -0.94],
[-0.86, 0.17],
[-0.06, -0.88],
[0.86, 0.11],
[1.09, 0.06],
[1.14, -1.16],
[-1.37, 0.28],
[-0.97, -0.06],
[0.91, -0.88],
[0.8, -0.83],
[0.8, -0.17],
[-2.17, 0.55],
[-0.74, 0.77],
[0.69, -1.27],
[2.29, -0.94],
[-2.69, 1.33],
[-0.8, -0.5],
[0.91, -0.39],
[0.17, -0.94],
[0.74, 0.06],
[0.57, -1.16],
[0.97, -0.5],
[0.97, -0.77],
[1.26, 0],
[1.09, 0.06],
[0, 1.16],
[-2.86, -0.11],
[-0.51, 0.94],
[1.71, -0.72],
[1.89, -0.61],
[0.34, -1],
[1.49, -0.11],
[1.43, 0.44],
[1.03, 0.88],
[0.57, 0.61],
[0.11, 0.61],
[0.91, 0.06],
[-0.06, 0.61],
[-0.06, 0.66],
[0.51, 0.06],
[0.17, 0.22],
[-0.17, 0.5],
[0.06, 0.33],
[0.69, 0.22],
[0.11, 0.61],
[-0.34, 0.77],
[-0.34, -0.77],
[0, 0.83],
[0.17, 0.77],
[-0.29, 0.94],
[-0.34, -1],
[-0.51, 0],
[0.06, 0.94],
[-0.17, 1.05],
[-0.51, 0.55],
[-0.29, -1.16],
[0.06, 1.49],
[-0.57, 0.55],
[-0.23, -1],
[-0.46, 0.77],
[-0.46, -0.77],
[-0.46, -0.06],
[-0.06, -0.55],
[0.34, -1.05],
[0.29, -1.16],
[0.46, -1.11],
[0, -1.27],
[-0.29, -0.55],
[-0.63, -0.39],
[0, -0.72],
[-0.69, -0.61],
[-1.09, -0.22],
[-0.69, 0.06],
[-0.8, -0.17],
[-0.97, 0],
[-0.74, 0.72],
[-0.11, 0.94],
[-0.34, 0.88],
[-0.17, 1.11],
[-0.11, 1.27],
[0.23, 1.49],
            ]),
            circle = Leo.circle(w(49), h(50.5), w(47)).setAttributes(fillStyle),
            poly = Leo.polygon(
                w(11), h(21),
                w(87.5), h(21),
                w(87.5), h(96),
                w(11), h(96),
            ).setAttributes(fillStyle);



        Leo.append(img);
        
        Leo.append(czz);
        Leo.append(hairs);
        Leo.append(face);
        // Leo.append(outer);
        // Leo.append(inner);
        Leo.append(circle, poly);
        
        
        
        Leo.render();
        Leo.positionInspector('[{r%x}, {r%y}],');
        // document.body.appendChild(Leo.downloadAnchor());
    }
    render();
    window.addEventListener('resize', render);
    
}
