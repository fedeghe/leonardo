window.onload = function () {

    function render() {
        console.log(Leonardo);
        var target = document.getElementById('trg'),
            prop = 422 / 436,
            // width = Math.min(987, window.innerWidth-50),
            width = window.innerWidth - 50,
            height = parseInt(width / prop, 10),
            Leo = Leonardo(width, height, { ns: '*', target: target }).setStyles({ backgroundColor: '#22222200' }),
            w = Leonardo.getScaler(width), //function (p) { return width * p / 100; },
            h = Leonardo.getScaler(height), //function (p) { return height * p / 100; },
            img = Leo.image(0, 0, width, height, './vitruvian.jpg').setAttributes({ opacity: 0.4 }),
            fillStyle = {
                "stroke-width": 2,
                "stroke": '#777777',
                "stroke-opacity": 1,
                "fill-opacity": 10,
                "stroke-linejoin": "round",
                fill: 'transparent'
            },

            crunch = Leo.positionCruncher(width, height, fillStyle),
            crunchClose = Leo.positionCruncher(width, height, fillStyle, true),

      
            czz = crunch([
                [46.74, 57.3],
                [0.63, 0.61],
                [0.91, -0.06],
                [-0.63, -1.05],
                [-0.06, 0.55],
                [1.43, 0.66],
                [-0.4, -1.66],
                [-0.29, 0.44],
                [1.14, 1.05],
                [0.69, -0.33],
                [-0.23, -1.22],
                [-0.63, 0.39],
                [0.8, 1.33],
                [0.8, -0.44],
                [-0.11, -1.49],
                [-0.29, 0.72],
                [0.74, 1.05],
                [-0.86, 0.61],
                [0.23, 1],
                [0, 1.11],
                [-0.34, 0.88],
                [-0.91, -0.11],
                [-0.51, -0.33],
                [-0.69, 0.5],
                [-0.63, -0.5],
                [-0.11, -0.88],
                [0.69, -0.72],
                [0.17, -1.05],
                [0.74, -0.61],
                [-0.29, 1],
                [0.11, 0.66],
                [-0.29, 0.61],
                [0, 0.44],
                [0.97, 1.16],
                [0.17, -0.66],
                [0.57, -0.55],
                [-0.29, -0.66],
                [-0.06, -1.33],
            ]),
            face = crunchClose([
                [46.63, 25.22],
                [0.91, -0.11],
                [0.91, -0.06],
                [-0.51, 0.72],
                [-0.86, 0.28],
                [-0.51, -0.44],
                [0.63, -0.06],
                [0.69, -0.11],
                [0.74, -0.17],
                [-0.11, 1.05],
                [0, 0.55],
                [-0.4, 0.39],
                [0.4, 0.06],
                [0.34, 0.17],
                [0.34, -0.17],
                [0.69, 0],
                [-0.11, -0.5],
                [-0.57, -0.39],
                [0, -1.55],
                [2.06, 0.17],
                [-0.23, 0.66],
                [-0.34, 0.33],
                [-0.63, -0.28],
                [-0.23, -0.5],
                [-0.23, -0.5],
                [0.97, 0.17],
                [-1.26, 0],
                [0, 1.49],
                [0.11, 0.83],
                [-0.63, 0.55],
                [0, 0.39],
                [-1.14, 0.33],
                [1.03, 0.17],
                [1.37, 0],
                [-0.86, -0.44],
                [-0.34, -0.72],
                [-0.63, -0.22],
                [0.34, -2.38],
                [-1.94, 0.22],
                [-0.46, -0.06],
                [-0.29, 1.6],
                [0.29, 1.94],
                [0.63, 1],
                [0.8, 0.28],
                [0.74, 0.11],
                [0.69, 0],
                [0.51, 0.06],
                [0.57, -0.22],
                [0.74, -0.44],
                [0.74, -0.88],
                [0.57, -1.94],
                [-0.06, -1.22],
                [-0.4, -1.16],
                [-0.63, -1.33],
                [-1.66, -0.44],
                [-1.31, 0.06],
                [-1.43, 0.72],
            ]),
            hairs = crunchClose([
                [46.34, 29.76],
                [-0.34, 0.77],
                [-0.86, 1],
                [-0.86, 0.88],
                [-0.23, -1.44],
                [-0.34, 0.11],
                [0.34, -1.71],
                [-1.14, 0.22],
                [-0.06, 0.55],
                [-0.17, -1.22],
                [1.14, 0],
                [-0.69, -0.94],
                [-0.86, 0.17],
                [-0.06, -0.88],
                [0.86, 0.11],
                [1.09, 0.06],
                [1.14, -1.16],
                [-1.37, 0.28],
                [-0.97, -0.06],
                [0.91, -0.88],
                [0.8, -0.83],
                [0.8, -0.17],
                [-2.17, 0.55],
                [-0.74, 0.77],
                [0.69, -1.27],
                [2.29, -0.94],
                [-2.69, 1.33],
                [-0.8, -0.5],
                [0.91, -0.39],
                [0.17, -0.94],
                [0.74, 0.06],
                [0.57, -1.16],
                [0.97, -0.5],
                [0.97, -0.77],
                [1.26, 0],
                [1.09, 0.06],
                [0, 1.16],
                [-2.86, -0.11],
                [-0.51, 0.94],
                [1.71, -0.72],
                [1.89, -0.61],
                [0.34, -1],
                [1.49, -0.11],
                [1.43, 0.44],
                [1.03, 0.88],
                [0.57, 0.61],
                [0.11, 0.61],
                [0.91, 0.06],
                [-0.06, 0.61],
                [-0.06, 0.66],
                [0.51, 0.06],
                [0.17, 0.22],
                [-0.17, 0.5],
                [0.06, 0.33],
                [0.69, 0.22],
                [0.11, 0.61],
                [-0.34, 0.77],
                [-0.34, -0.77],
                [0, 0.83],
                [0.17, 0.77],
                [-0.29, 0.94],
                [-0.34, -1],
                [-0.51, 0],
                [0.06, 0.94],
                [-0.17, 1.05],
                [-0.51, 0.55],
                [-0.29, -1.16],
                [0.06, 1.49],
                [-0.57, 0.55],
                [-0.23, -1],
                [-0.46, 0.77],
                [-0.46, -0.77],
                [-0.46, -0.06],
                [-0.06, -0.55],
                [0.34, -1.05],
                [0.29, -1.16],
                [0.46, -1.11],
                [0, -1.27],
                [-0.29, -0.55],
                [-0.63, -0.39],
                [0, -0.72],
                [-0.69, -0.61],
                [-1.09, -0.22],
                [-0.69, 0.06],
                [-0.8, -0.17],
                [-0.97, 0],
                [-0.74, 0.72],
                [-0.11, 0.94],
                [-0.34, 0.88],
                [-0.17, 1.11],
                [-0.11, 1.27],
                [0.23, 1.49],
            ]),
            body = crunch([
                [46.21, 30.97],
                [-1.66, 1.74],
                [-3.45, 5.61],
                [0.83, 2.54],
                [0.28, 2.67],
                [0.97, 2.67],
                [0.69, 0.93],
                [-1.1, 2.27],
                [0, 1.47],
                [2.07, 0.8],
                [0.97, 3.2],
                [1.79, 2],
                [2.34, 0.13],
                [2.34, -2.27],
                [1.24, -3.34],
                [1.24, -0.13],
                [0.55, -1.34],
                [-0.55, -1.47],
                [0.28, -1.07],
                [-0.41, -0.93],
                [0.83, -1.07],
                [0.69, -2.67],
                [0.41, -2.94],
                [0.97, -1.6],
                [-2.9, -5.74],
                [-3.03, -2.14],
            ]),
            rightArm = crunch([
                [57.8, 37.84],
                [1.57, -0.63],
                [2.03, 0.45],
                [1.66, -0.45],
                [3.14, 0.09],
                [1.57, -0.36],
                [1.39, 0.63],
                [3.14, 0.36],
                [2.95, -0.98],
                [2.68, 0],
                [2.22, -0.36],
                [2.31, 0.09],
                [3.79, -0.45],
                [-2.12, -0.63],
                [2.68, -0.54],
                [-2.31, -0.36],
                [2.86, -0.54],
                [-2.86, -0.09],
                [2.12, -0.72],
                [-4.25, -0.98],
                [2.03, 1.25],
                [-3.32, 1.43],
                [-0.55, -1.25],
                [1.39, -1.07],
                [-2.22, 0.98],
                [-4.34, 0.36],
                [-2.68, -0.45],
                [-2.68, 0],
                [-1.85, 0.72],
                [-3.97, -0.63],
                [-2.68, -0.18],
                [-3.05, -0.63],
                [-3.23, -0.09],
                [-1.02, -0.98],
                [1.94, -0.72],
                [1.94, -0.89],
                [1.75, 0.09],
                [1.02, 0.36],
                [-1.29, 0.54],
                [3.69, -1.61],
                [2.68, -0.72],
                [1.02, -0.36],
                [1.29, -1.16],
                [2.31, -0.98],
                [3.23, -0.98],
                [3.05, -0.98],
                [1.75, -0.63],
                [1.02, -1.25],
                [1.48, -0.18],
                [1.57, 0.09],
                [-1.57, 1.07],
                [-0.09, 1.25],
                [-0.28, -2.95],
                [1.66, -0.72],
                [1.57, 0],
                [-1.11, 0.72],
                [2.22, -0.45],
                [-1.39, 0.98],
                [1.94, -0.54],
                [-2.49, 1.7],
                [2.22, -0.27],
                [-0.65, 0.98],
                [-2.22, 0.89],
                [-1.11, 0.89],
                [-1.48, 0.54],
                [-2.03, 1.07],
                [-2.86, 1.16],
                [-2.31, 1.43],
                [-2.22, 1.07],
                [-1.94, 0.09],
                [-2.03, 0.72],
                [-2.22, 1.07],
                [-2.95, 1.16],
                [-2.4, 0.72],
                [-1.39, 1.52],
            ]),
            leftArm = crunch([
                [41.18, 39],
                [-1.11, -1.61],
                [-2.95, 0.36],
                [-2.4, -0.81],
                [-2.68, 0],
                [-2.12, 0],
                [-1.02, 0.36],
                [-2.86, -0.09],
                [-3.05, -0.36],
                [-3.51, -0.54],
                [-2.12, 0.36],
                [-4.8, -0.72],
                [2.12, -0.72],
                [-3.05, -0.18],
                [3.05, -0.45],
                [-3.6, -0.54],
                [2.77, -0.89],
                [-1.2, -0.98],
                [2.86, 0.18],
                [1.29, 0.45],
                [-2.22, 0.72],
                [2.03, 0.63],
                [-1.39, -1.16],
                [2.59, -0.09],
                [1.57, 0.98],
                [2.59, -0.18],
                [3.79, -0.36],
                [2.59, 0.18],
                [2.22, 0.72],
                [2.03, -0.36],
                [1.94, 0.09],
                [1.29, 0.27],
                [1.75, -0.81],
                [2.68, -0.89],
                [1.75, 0.18],
                [1.57, -0.81],
                [-1.85, -0.89],
                [-1.48, -0.72],
                [-1.39, 0.09],
                [-1.2, 0.27],
                [0.83, 0.45],
                [-2.12, -1.52],
                [-2.03, -0.18],
                [-1.75, -0.27],
                [-2.22, 0.27],
                [1.29, -0.36],
                [-1.11, -1.34],
                [-1.94, -0.98],
                [-1.75, -0.63],
                [-2.03, -0.27],
                [-2.12, -0.45],
                [-1.57, -0.72],
                [-1.29, -0.72],
                [-0.46, -0.89],
                [-1.39, -1.52],
                [-3.05, -0.89],
                [2.12, 1.61],
                [-3.05, -1.43],
                [2.22, 1.88],
                [-2.4, -0.72],
                [2.31, 1.79],
                [-1.85, -0.09],
                [2.59, 2.15],
                [0.09, -1.52],
                [-1.48, -1.88],
                [3.05, 0.89],
                [-2.77, -0.54],
                [1.94, 2.24],
                [-0.37, 1.07],
                [1.66, 0.81],
                [2.12, 0.89],
                [0.18, -0.98],
                [1.57, 1.61],
                [2.4, 2.06],
                [1.85, 0.45],
                [1.57, 0.45],
                [1.94, 0.09],
                [2.31, 0.98],
                [1.75, 0.36],
                [2.49, 1.88],
                [1.39, 0.36],
                [1.2, 0.54],
                [1.85, 2.15],
                
            ]),
            leftLeg = crunch([
                [49.03, 61.45],
                [-0.74, 3.67],
                [-0.92, 2.77],
                [0.28, 2.68],
                [-0.55, 3.22],
                [-1.02, 2.5],
                [-0.18, 2.5],
                [0.55, 2.86],
                [-0.09, 2.15],
                [0, 2.15],
                [0.37, 2.15],
                [0, 1.97],
                [1.11, 1.61],
                [0.18, 1.52],
                [1.02, 1.43],
                [-0.09, 0.98],
                [-0.83, 0.45],
                [-0.46, -0.98],
                [-0.55, 0.89],
                [-0.37, -0.98],
                [-0.18, 0.81],
                [-0.37, -0.81],
                [-0.18, 0.89],
                [-0.65, -0.81],
                [-0.37, 0.63],
                [-0.46, -0.54],
                [-0.09, -1.25],
                [0.18, -1.88],
                [-0.37, -1.43],
                [-1.29, -2.24],
                [-0.65, -2.42],
                [-0.74, -1.97],
                [0, -3.49],
                [0.37, -2.33],
                [0.37, -2.86],
                [0.55, -3.13],
                [-0.28, -0.98],
                [0.74, 1.25],
                [-0.92, -3.04],
                [-0.46, -2.68],
                [-0.18, -2.95],
                [0, -1.97],
                [0.09, -2.68],
                [-0.28, -2.5],
                [0, -1.25],
                [0.65, -2.5],
                [0.55, -1.7],
                [-1.66, 5.28],
                [-1.39, 1.61],
                [-0.83, 2.06],
                [-0.65, 2.06],
                [-1.11, 2.42],
                [-0.09, 2.59],
                [-1.02, 1.43],
                [-1.48, 1.34],
                [-0.28, 1.07],
                [-1.75, 1.61],
                [-1.29, 2.06],
                [-1.29, 2.15],
                [-1.02, 2.86],
                [-0.55, 2.42],
                [-0.37, 2.06],
                [-0.74, 2.33],
                [-0.83, 0.81],
                [-0.92, 0.36],
                [-1.2, 0.18],
                [0, 0.81],
                [0.65, 0.45],
                [0.18, -0.81],
                [0.09, 1.07],
                [0.74, 0.27],
                [0, -1.07],
                [0.37, 1.43],
                [0.37, 0.27],
                [0, -1.16],
                [0.65, 1.52],
                [1.29, -0.09],
                [0.37, -1.07],
                [0.65, -1.7],
                [0, -1.88],
                [0.83, -1.61],
                [1.11, -1.52],
                [1.39, -1.79],
                [1.29, -1.52],
                [0.83, -2.15],
                [0.83, -2.33],
                [1.57, -1.88],
                [1.48, -1.52],
                [1.39, -1.79],
                [1.02, -1.61],
                [1.66, -2.59],
                [1.94, -1.88],
                [1.48, -1.97],
                [0.92, -1.25],
            ]),
            rightLeg = crunch([[50.51, 61.27],
            [1.02, 2.95],
            [1.75, 2.5],
            [1.94, 1.79],
            [0.83, 2.24],
            [0, 1.16],
            [1.11, 1.07],
            [0.83, 2.24],
            [0.37, 2.15],
            [0.74, 1.88],
            [1.11, 1.88],
            [1.39, 0.81],
            [0.55, 1.61],
            [1.29, 1.88],
            [1.11, 1.07],
            [1.29, 1.88],
            [0.65, 1.34],
            [0, 0.98],
            [0.55, 0.98],
            [1.2, 0],
            [1.2, -0.63],
            [0.28, -0.54],
            [1.39, -0.09],
            [0.92, -0.54],
            [0.83, -0.63],
            [1.02, -0.54],
            [-0.18, -0.72],
            [-1.57, 0.27],
            [2.12, 0.09],
            [0.46, -0.63],
            [-0.83, -0.27],
            [1.57, 0.18],
            [-1.29, -0.54],
            [-1.66, 0.36],
            [-1.39, 0.18],
            [-1.85, -0.27],
            [-1.29, -1.25],
            [-1.29, -3.13],
            [-1.02, -3.13],
            [-1.39, -2.86],
            [-1.02, -1.88],
            [-1.02, -1.25],
            [-0.46, -1.34],
            [-0.09, -1.61],
            [-1.02, -1.34],
            [-0.37, -1.61],
            [0.18, -1.79],
            [-0.74, -1.97],
            [-0.74, -2.24],
            [-1.02, -2.06],
            [-1.29, -2.06],
            [-0.55, -1.34],
            [0.18, -1.7],
            [-0.74, -1.7],
            [-0.55, -1.79],
            [0.09, 3.67],
            [0.09, 3.85],
            [0.18, 2.95],
            [0.09, 2.77],
            [-0.46, 2.5],
            [-0.55, 2.5],
            [-0.65, 2.42],
            [-0.37, 1.43],
            [0.18, 1.7],
            [-0.65, 1.61],
            [-0.46, 1.16],
            [-0.18, 2.06],
            [0.09, 2.59],
            [0, 2.42],
            [0, 2.24],
            [0.18, 2.33],
            [0.37, 1.88],
            [0.55, 1.16],
            [1.48, 0.81],
            [1.02, 0.72],
            [1.57, 0.36],
            [1.29, 0.18],
            [1.39, 0.45],
            [-0.09, 0.54],
            [-2.12, 0],
            [-1.75, 0.27],
            [-1.85, -0.54],
            [-1.85, -0.09],
            [-1.02, 0.45],
            [-1.48, -0.18],
            [-0.28, -1.16],
            [0.18, -1.34],
            [-0.37, -1.52],
            [-0.65, -2.15],
            [-0.28, -1.97],
            [0, -1.7],
            [0.65, 0.72],
            [-1.29, -1.79],
            [-0.65, -2.24],
            [0.09, -2.42],
            [0.65, -2.15],
            [0.46, -1.97],
            [-0.18, -1.43],
            [0.18, -2.33],
            [0.09, -2.15],
            [-0.09, -1.97],
            [-0.28, -1.88],
            [0.37, -4.56],]),
            leftTit1 = crunch([[41.55, 38.73],
                [1.11, 1.16],
                [1.39, 0.54],
                [1.66, 0.18],
                [1.29, -0.54],
                [1.48, -0.72],]),
            leftTit2 = crunch([[44.69, 39.62],
                [0.92, -0.09],
                [-0.83, -0.45],
                [-0.55, 0.36],]),
            rightTit1 = crunch([[56.79, 37.75],
                [-0.83, 0.27],
                [-0.74, 1.25],
                [-1.39, 0.98],
                [-1.94, 0.09],
                [-1.66, -0.81],]),
            rightTit2 = crunch([[52.08, 39.8],
                [1.02, -0.09],
                [-0.55, -0.27],
                [-0.55, 0.18],]),
                body1 = crunch([[41.55, 39],
                    [0.09, 1.16],
                    [0.37, 1.34],
                    [0.28, 2.06],
                    [0.37, 1.79],
                    [0.92, 1.34],
                    [-0.46, 0.81],
                    [-0.18, 1.43],
                    [-0.18, 1.43],
                    [1.2, 0.89],
                    [1.11, 1.7],
                    [1.2, 1.7],]),
                body2 = crunch([[57.43, 38.01],
                    [-0.65, 1.88],
                    [-0.65, 1.52],
                    [-0.46, 2.15],
                    [-0.37, 1.61],
                    [-0.46, 1.34],
                    [-0.46, -0.54],
                    [0.55, 1.07],
                    [0.09, 1.25],
                    [-0.37, 0.45],
                    [0.65, 0.81],
                    [-0.18, 1.16],
                    [-0.55, 0.54],
                    [-1.02, 0.09],
                    [-0.55, 1.88]]),

            circle = Leo.circle(w(49), h(50.5), w(47)).setAttributes(fillStyle),
            poly = Leo.polygon(
                w(11), h(21),
                w(87.5), h(21),
                w(87.5), h(96),
                w(11), h(96),
            ).setAttributes(fillStyle);



        // Leo.append(img);

        Leo.append(czz);
        Leo.append(hairs);
        Leo.append(face);
        // Leo.append(body);
        Leo.append(rightArm);
        Leo.append(leftArm);
        Leo.append(leftLeg);
        Leo.append(rightLeg);
        Leo.append(leftTit1, leftTit2);
        Leo.append(rightTit1, rightTit2);
        Leo.append(body1, body2);
        // Leo.append(outer);
        // Leo.append(inner);
        Leo.append(circle, poly);



        Leo.render();
        Leo.positionInspector('[{r%x}, {r%y}],');
        Leo.downloadAnchor('download', 'vitruvian', document.body);

        
    }
    render();
    window.addEventListener('resize', render);

}
