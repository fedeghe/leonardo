window.onload = function () {

    function render() {
        var target = document.getElementById('trg'),
            prop = 5,
            // width = Math.min(987, window.innerWidth-50),
            width = 177*prop,
            height = 185*prop,
            
            Leo = Leonardo(width, height, { ns: '*', target: target }).setStyles({backgroundColor: '#222'}),
            img = Leo.image(0,0,width, height, './stemma.jpg');//.setAttributes({opacity: 0.4}),
            fillStyle = {
                "stroke-width": 2,
                "stroke": '#ef88d8',
                "stroke-opacity": 1,
                "fill-opacity": 10,
                "stroke-linejoin": "round",
                fill: 'transparent'
            },
            fillStyle2 = {
                "stroke-width": 2,
                "stroke": '#88efd8',
                "stroke-opacity": 1,
                "fill-opacity": 10,
                "stroke-linejoin": "round",
                fill: 'transparent'
            };
			// ,

            crunch = Leo.positionCruncher(width, height, fillStyle, true),
            crunch2 = Leo.positionCruncher(width, height, fillStyle2),
            pieces = [
				[
					[47.91, 96.65],
					[-1.81, -3.46],
					[-4.18, -3.14],
					[-5.31, -2.27],
					[-4.07, -3.35],
					[-2.49, -5.41],
					[-0.9, -9.41],
					[0.23, -12.86]
				]
			]
            pieces2 = [
                [
                    [47.45, 30.23],
                    [1.02, 1.91],
                    [1.4, 1.02],
                    [-0.13, -1.15],
                    [0.89, 1.28],
                    [1.15, 0.13],
                    [1.66, 0.51],
                    [-1.91, -2.17],
                    [2.42, 1.28],
                    [1.4, 1.15],
                    [3.83, 0.64],
                    [-2.3, -1.53],
                    [-3.06, -2.55],
                    [2.42, 1.15],
                    [2.3, 1.15],
                    [2.3, 1.4],
                    [-2.17, -2.3],
                    [-1.28, -2.42],
                    [2.55, 2.3],
                    [1.53, 1.4],
                    [2.68, 1.53],
                    [-1.4, -2.04],
                    [-2.04, -1.79],
                    [-1.28, -1.91],
                    [5.1, 4.46],
                    [2.81, 1.66],
                    [2.42, 0],
                    [-2.3, -1.02],
                    [-3.32, -1.66],
                    [-3.32, -3.57],
                    [2.93, 1.79],
                    [4.46, 2.68],
                    [2.68, 0.64],
                    [-3.19, -2.04],
                    [-4.34, -3.7],
                ],
                [
                    [50.26, 39.67],
                    [2.17, -0.64],
                    [2.17, -1.4],
                    [2.04, -1.4],
                    [3.19, -0.51],
                    [2.68, 0],
                    [2.68, 0.38],
                    [2.68, 0.89],
                    [2.81, 1.15],
                    [-1.4, 1.53],
                    [-2.42, 1.28],
                    [-3.95, 0.64],
                    [-3.44, -0.13],
                    [-3.44, -0.77],
                    [-2.68, -0.89],
                ],
                [
                    [57.65, 36.99],
                    [0.89, 1.91],
                    [1.79, 1.28],
                    [1.91, 0.26],
                    [2.3, -0.26],
                    [1.4, -1.66],
                    [0.77, -1.28],
                    [-1.53, -0.51],
                    [-1.91, -0.38],
                    [1.53, 0.89],
                    [-2.17, -1.15],
                    [1.66, 2.04],
                    [-1.79, -1.53],
                    [0.89, 2.04],
                    [-0.38, -1.15],
                    [-0.38, 1.28],
                    [-0.13, -1.15],
                    [-1.02, 0.77],
                    [0.13, -1.66],
                    [-0.89, 0.38],
                    [1.28, -1.02],
                    [-1.91, 0.26],
                ],
                [
                    [39.67, 70.28],
                    [1.79, 0.26],
                    [1.4, -0.26],
                    [2.68, -1.66],
                    [-2.93, 0.89],
                    [1.28, -1.53],
                    [1.28, -1.28],
                    [2.3, 0.13],
                    [1.79, -0.13],
                    [1.53, -0.64],
                    [1.02, -1.4],
                    [0.64, -2.04],
                    [-0.38, -1.79],
                    [-1.02, -1.66],
                    [-2.04, -1.15],
                ],
                [
                    [39.29, 80.23],
                    [1.66, -0.38],
                    [1.79, -1.02],
                    [2.3, 0.13],
                    [1.15, 0.64],
                    [2.3, 0.38],
                    [2.17, 0.26],
                    [1.53, 0.64],
                    [2.68, 0.64],
                    [-1.79, -1.53],
                    [-5.36, -3.19],
                    [-3.44, -0.64],
                    [-3.06, 0.26],
                    [-1.66, 0.26],
                ],
                [
                    [39.29, 84.06],
                    [2.55, -0.38],
                    [2.55, -0.89],
                    [3.19, 0],
                    [3.19, 0],
                    [3.19, -0.64],
                    [0.77, -0.26],
                ],
                [
                    [52.81, 61.61],
                    [1.66, 1.91],
                    [2.55, 3.44],
                    [2.42, 3.7],
                    [1.91, 3.06],
                    [1.53, 2.3],
                ],
                [
                    [53.19, 44.77],
                    [1.4, 2.93],
                    [2.55, 1.66],
                    [3.7, 1.15],
                    [2.81, -0.26],
                    [2.42, -2.04],
                    [4.34, -0.64],
                    [4.72, -0.38],
                    [3.83, -1.4],
                    [-10.59, 1.28],
                    [-5.1, 0.26],
                    [-5.23, -1.02],
                    [-2.17, 0],
                ],
                [
                    [60.46, 15.56],
                    [2.68, 1.02],
                    [4.08, 0.26],
                    [3.06, 1.79],
                    [2.68, 2.3],
                    [2.3, 3.19],
                ]
            ]


        Leo.append(img);
        Leo.append(pieces.map(function(p) {return crunch(p)}));
        Leo.append(pieces2.map(function(p) {return crunch2(p)}));
        
        
        
        
        
        Leo.render();
        Leo.positionInspector('[{r%x}, {r%y}],');
    }
    render();
    window.addEventListener('resize', render);
    
}
